(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[125],{7221:function(e,t,n){Promise.resolve().then(n.bind(n,3241))},3241:function(e,t,n){"use strict";n.d(t,{IndicatorDetailClient:function(){return c}});var a=n(7437),s=n(2265),l=n(8706),i=n(6530),r=n(6264);function c(e){let{keyParam:t}=e,{t:n,locale:c}=(0,i.b)(),[d,o]=(0,s.useState)(null),[x,m]=(0,s.useState)("30d"),[u,h]=(0,s.useState)(!0),[p,f]=(0,s.useState)(null),[g,b]=(0,s.useState)(null);(0,s.useEffect)(()=>{t&&(0,r.cS)(t,x,"1d").then(o).catch(e=>f(e.message)).finally(()=>h(!1))},[t,x]);let j="es"===c?"es":"en",v=(0,s.useCallback)(e=>new Date(e).toLocaleDateString(j,{month:"short",day:"numeric"}),[j]),N=(0,s.useCallback)(e=>new Date(e).toLocaleDateString(j,{day:"numeric",month:"numeric"}),[j]);if(!t)return null;if(u)return(0,a.jsx)("div",{className:"p-8",children:n("common.loading")});if(p)return(0,a.jsxs)("div",{className:"p-8 text-red-600",children:[n("common.error"),": ",p]});let y=(null==d?void 0:d.data)||[],w=Math.max(...y.map(e=>e.value),1),D=Math.min(...y.map(e=>e.value),0),k=w-D||1,C=[D,D+.5*k,w].filter((e,t,n)=>n.indexOf(e)===t),S=Math.max(1,Math.floor(y.length/5)),M=y.length>14?N:v;return(0,a.jsxs)("main",{className:"min-h-screen p-8 max-w-4xl mx-auto",children:[(0,a.jsx)(l.l,{}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:t}),(0,a.jsxs)("div",{className:"mb-4 flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>m("30d"),className:"px-3 py-1 rounded ".concat("30d"===x?"bg-blue-600 text-white":"bg-gray-200"),children:n("indicatorsDetail.period30")}),(0,a.jsx)("button",{onClick:()=>m("90d"),className:"px-3 py-1 rounded ".concat("90d"===x?"bg-blue-600 text-white":"bg-gray-200"),children:n("indicatorsDetail.period90")})]}),0===y.length?(0,a.jsxs)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 text-amber-800",children:[(0,a.jsx)("p",{className:"font-medium",children:n("indicatorsDetail.noHistory")}),(0,a.jsx)("p",{className:"mt-1 text-sm",children:n("indicatorsDetail.noHistoryHint")})]}):(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-white relative",children:[(0,a.jsxs)("div",{className:"flex gap-2 h-56",children:[(0,a.jsx)("div",{className:"flex flex-col justify-between text-right text-xs text-gray-500 pr-2 shrink-0",children:C.map(e=>(0,a.jsx)("span",{children:"number"==typeof e&&e%1!=0?e.toFixed(2):e},e))}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,a.jsx)("div",{className:"flex items-end gap-px flex-1 relative",children:y.map((e,t)=>(0,a.jsx)("div",{className:"flex-1 bg-blue-500 rounded-t min-w-0",style:{height:"".concat(w===D?100:(e.value-D)/k*100,"%")},onMouseEnter:t=>{let n=t.currentTarget.getBoundingClientRect();b({point:e,x:n.left+n.width/2,y:n.top})},onMouseLeave:()=>b(null)},e.ts))}),(0,a.jsx)("div",{className:"flex text-xs text-gray-500 mt-1 gap-px",children:y.map((e,t)=>(0,a.jsx)("span",{className:"flex-1 min-w-0 text-center",style:{flex:1},children:t%S==0?M(e.ts):""},e.ts))})]})]}),g&&(0,a.jsxs)("div",{className:"fixed z-50 px-2 py-1 text-xs font-medium bg-gray-800 text-white rounded shadow-lg pointer-events-none",style:{left:g.x,top:g.y-32,transform:"translate(-50%, 0)"},children:[v(g.point.ts),": ",g.point.value]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:n("indicatorsDetail.chartHint")})]})]})}}},function(e){e.O(0,[138,67,971,23,744],function(){return e(e.s=7221)}),_N_E=e.O()}]);